<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>商品列表</title>
    <link th:href="@{/assets/global/plugins/bootstrap/css/bootstrap.min.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/global/css/components.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/assets/admin/pages/css/login.css}" rel="stylesheet" type="text/css"/>
    <link th:href="@{/css/module/plugins/iconfont/iconfont.css}" rel="stylesheet" type="text/css"/>
    <script th:src="@{/assets/global/plugins/jquery-1.11.0.min.js}" type="text/javascript"></script>
</head>
<body>
<div class="content">
    <h3 class="form-title">商品列表浏览</h3>
    <div class="table table-responsive">
        <table class="table">
            <thead>
                <tr>
                    <th>商品ID</th>
                    <th>商品名</th>
                    <th>商品价格</th>
                    <th>商品销量</th>
                    <th>商品库存</th>
                    <th>商品描述</th>
                    <th>商品图片</th>
                </tr>
            </thead>
            <tbody id="container">
                <tr th:each="item : ${itemVOList}">
                    <td th:text="${item.id}" id="itemDetail"></td>
                    <td th:text="${item.title}"></td>
                    <td th:text="${item.getPrice()}"></td>
                    <td th:text="${item.getSales()}"></td>
                    <td th:text="${item.getStock()}"></td>
                    <td th:text="${item.getDescription()}"></td>
                    <td><img th:src="${item.getImgUrl()}" th:style="'width:100px;height:auto'" src=""></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
<script type="text/javascript">
    $("#itemDetail").on("click",function (e) {
        var id = $('#itemDetail').html();
        console.log(id);
        window.location.href = "/item/getItem2/"+id;
    });
    $().ready(function () {
        var id = $('#itemDetail').html();
        console.log(id);
    })
</script>
<!--<script>
    //定义全局商品数组信息
    var g_itemList=[];
    jQuery(document).ready(function () {
         $.ajax({
                type:"GET",
                url:"http://localhost:8090/item/listItem",
                xhrFields:{
                    withCredentials:true
                },
                success:function (data) {
                    if(data.status=="success"){
                        g_itemList=data.data;
                        reloadDom();
                    }else{
                        alert("获取商品信息失败，原因为"+data.data.errMsg);
                    }
                },
                error:function (data) {
                    alert("获取商品信息失败，原因为"+data.responseText);
                }
            });
        });

function reloadDom() {
    for(var i=0;i<g_itemList.length;i++){
        var itemVO= g_itemList[i];
        var dom="<tr data-id='"+itemVO.id+"' id='itemDetail"+itemVO.id+"'><td>"+
            itemVO.title+"</td><td><img style='width: 100px;height:auto' src='"+
            itemVO.imgUrl+"'/></td><td>" +
            itemVO.description+"</td><td>"+
            itemVO.price+"</td><td>"+
            itemVO.stock+"</td><td>"+
            itemVO.sales+"</td></tr>";
        $("#container").append($(dom));
        $("#itemDetail"+itemVO.id).on("click",function (e) {
           window.location.href="getitem.html?id="+$(this).data("id"); //此处that对应上面data-id
        });
    }

}
</script>-->

</html>